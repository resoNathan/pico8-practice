pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
function _init()
	take_input = true
	dir_note = {"d","e","f","g"}
	dir_col = {8,10,11,12}
	dir_arr = {"⬅️","➡️","⬆️","⬇️"}
	
	start_game()
end

function _update()
	if take_input then
		for i=0,3 do
			if btnp(i) then input=i+1; play_dir() end
		end
	end
end

function pause(i)
	for j=0,i do flip() end
end
-->8
function start_game()
	pattern = {}
	score = 0
	add_step()
end

function play_dir()
	if pattern[step] == input then
		show_dir(input)
		if step >= #pattern then
			score += 1
			pause(10)
			cls(0)
			pause(10)
			add_step()
		else
			step += 1
		end
	else
		--todo: add game over
		start_game()
	end
end

function add_step()
	step = 1
	add(pattern, flr(rnd(4))+1)
	
	for k,v in pairs(pattern) do
		show_dir(v)
		pause(15)
	end
	cls()
end

function show_dir(d)
	cls()
	--display arrow with color
	print("\^w\^t"..dir_arr[d], 57, 59, dir_col[d])
	--play corresponding note
	print("\ai3"..dir_note[d])
end

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
010100001a3001a3001a3001a3001a3001a3001a3001a300003000030000300003000030000300003000030000300003000030000300003000030000300003000030000300003000030000300003000030000300
